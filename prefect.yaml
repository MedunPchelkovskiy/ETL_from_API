prefect-version: "3.*"
name: etl_from_api

deployments:
  - name: Orchestrator-Deployment
    entrypoint: src/flows/master/orchestrator_flow.py:orchestrator_flow
    schedule: # optional, can remove if you want manual runs
      cron: "11 * * * *"
      timezone: Europe/Sofia
    work_pool:
      name: local-dev-process


  - name: bronze
    description: Local Prefect deployment
    entrypoint: src/flows/bronze/extract_data_for_ski_resorts_in_Bulgaria_flow.py:weather_flow_run
    tags: [local, portfolio]
    parameters:
      debug: true
    schedule:
      cron: "13 * * * *"
      timezone: Europe/Sofia
    concurrency_limit: 1
    work_pool:
      name: local-dev-process


  - name: silver-flow
    description: Local Prefect deployment for second flow
    entrypoint: src/flows/silver/extract_bronze_data_flow.py:transform_bronze_data
    tags: [ local, portfolio ]
    parameters:
      debug: true
    concurrency_limit: 1
    work_pool:
      name: local-dev-process


  - name: gold-flow
    description: Local Prefect deployment for gold forecast flow
    entrypoint: src/flows/gold/daily_dataset_forecast.py:daily_forecast
    tags: [ local, portfolio ]
    parameters:
      debug: true
    concurrency_limit: 1
    work_pool:
      name: local-dev-process

  - name: gold-five-day-forecast
    description: Local Prefect deployment for gold five day forecast flow
    entrypoint: src/flows/gold/five_day_dataset_forecast.py:five_day_forecast
    schedule:
      cron: "20 * * * *"
      timezone: Europe/Sofia
    tags: [ local, portfolio ]
    parameters:
      debug: true
    concurrency_limit: 1
    work_pool:
      name: local-dev-process

